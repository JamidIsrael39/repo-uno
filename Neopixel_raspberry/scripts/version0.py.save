import time
from rpi_ws281x import PixelStrip, Color

# Configuración de la matriz
LED_COUNT = 64          # Número de LEDs (8x8)
LED_PIN = 18            # GPIO18 (Pin 12)
LED_FREQ_HZ = 800000    # Frecuencia de la señal (no modificar)
LED_DMA = 10            # Canal DMA (usar 10 para Pi 3B+)
LED_BRIGHTNESS = 10     # Brillo (0-255)
LED_INVERT = False      # Invertir señal (no necesario)

# Inicializar la tira de LEDs
strip = PixelStrip(LED_COUNT, LED_PIN, LED_FREQ_HZ, LED_DMA, LED_INVERT, LED_BRIGHTNESS)
strip.begin()

def color_all(color):
    """Encender todos los LEDs del mismo color"""
    for i in range(strip.numPixels()):
        strip.setPixelColor(i, color)
    strip.show()

def spiral_animation(wait_ms=50):
    """Animación en espiral con colores aleatorios"""
    from random import randint
    for i in range(LED_COUNT):
        strip.setPixelColor(i, Color(randint(0, 255), randint(0, 255), randint(0, 255)))
        strip.show()
        time.sleep(wait_ms / 1000.0)

def mi_funcion():
    print("Entrando a mi funcion JAMID")
    for i in range(strip.numPixels()):
        if i%2 == 1:
            strip.setPixelColor(i, Color(0, 128, 128))
            strip.show()
            time.sleep(1)
            strip.setPixelColor(i, Color(0, 0, 0))

if __name__ == "__main__":
    try:
        print("Encendiendo matriz NeoPixel...")
        #color_all(Color(255, 255, 255))  # Rojo (R, G, B)
        #time.sleep(2)
        #color_all(Color(0, 0, 0))    # Apagar
        #spiral_animation()
        mi_funcion()
        time.sleep(1)
        color_all(Color(0, 0, 0))
    except KeyboardInterrupt:
        color_all(Color(0, 0, 0))
